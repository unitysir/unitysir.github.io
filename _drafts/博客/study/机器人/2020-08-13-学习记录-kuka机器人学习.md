---
layout: post
title: Unity与Kuka机器人
date: 2020-08-13 12:45:48
categories: 机器人学习
tag: unity与kuka通信
---

## 前期准备

1. 确保电脑与机器人网络通畅
2. 在机器人上启动 KUKAVARPROXY.exe 程序
3. 将HslCommunication库导入VS2019
4. 打开机器人7000端口
   * 投入运行->网络配置->其他->NAT

## 机器人基本认识

1. A1~A6 轴号，E1~E2 外部轴

## 数据读取

1. 简单的数据读取

```C#
 KukaAvarProxyNet robotProxy = new KukaAvarProxyNet("172.168.0.19", 7000);// 连接机器人
OperateResult<string> ret = robotProxy.ReadString("$OV_PRO"); // 速率($OV_PRO)

if ( ret.IsSuccess ) {  //判断是否访问成功
    var result = ret.Content;  // 获取机器人数据
    Console.WriteLine(result);
}
```

## 遇到的问题：
##### 当使用Unity实时(每隔0.5秒)获取机器人的轴坐标时，伴随着机器人的移动，模型也跟着运动，移动时的轨迹不同(模型会在移动时旋转)，但终点位置却一致。

## 问题分析：
#### 经过几番测试，我得出了一下结论：
1. 从机器人解析出来的坐标数据是一次性发送给模型的。
2. 通过第一条可以得出 模型的每个轴都是 同时运动的。
3. 模型收到的数据与之前相同时，也会执行。

#### 需要解决的问题：
* **在转动某一轴时，其他轴不能随意转动**


## 解决思路：
在转动某轴时，固定其他不相关的轴即可。
向需要固定的轴**无限次**发送当前的坐标，来达到固定轴的目的
#### 具体思路：
1. 实时获取到每个轴**当前**的坐标和**前一次**的坐标，分别用两个列表来存储。
2. 在机器人**运动完毕**后，**判断**机器人**当前的**旋转坐标与**上次的**旋转坐标是否相等，分别用两个列表存储。
3. 在Unity的Update() 方法中实时判断 每个轴的**当前值**和**前一次的值**是否相等
    * 如果相等，说明这个轴是没有运动的，则可以将它固定；反之，不固定。
    * 通过第二条的**旋转坐标值**向**需要固定**的轴无限赋值，来达到固定的目的


---

---

## 个人信息：
### 姓名：邹建
### 就读于： 四川工程职业技术学院
### 2019年加入 软件工作室(DS)
### QQ：451991189
### 个人博客：https://unitysir.github.io/
### B站ID：308511666

## 如果内容对你有所帮助：
![wx](https://pic4.zhimg.com/v2-87fbc8ee6ab3fd92f423d414d039b627_b.jpeg)

![zfb](https://pic2.zhimg.com/v2-b8ab4acf7899b2ced11287cdbd8279b5_b.jpeg)